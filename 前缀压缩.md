# 存储文件名使用的前缀压缩技术

参考链接：

[Trie Tree和Radix Tree - 回眸,境界 - 博客园](https://www.cnblogs.com/bianqi/p/12183536.html)

[字典树 | 爱编程的大丙](https://subingwen.cn/data-structure/trie-tree/#1-Trie-树的基本概念)

[基数树(Radix Tree)一句话，基数树是一种多叉树。 更官方一点的解释：radix tree是一种多叉搜索树。树的 - 掘金](https://juejin.cn/post/6933244263241089037)

[字符串压缩方法：RLE,Huffman,LZW与进制转换-CSDN博客](https://blog.csdn.net/sinat_34206747/article/details/131151634)

​	字典/前缀树（Trie Tree）是一种树型结构，常用于统计、排序和保存大量的字符串。主要思想是利用字符串的**公共前缀**来节约存储空间。字典树用边来代表字母，而从根结点到树上某一结点的路径就代表了一个字符串。**当需要保存的字符串拥有大量重复的前缀时，这种结构能够节约大量的空间**。

<img src="https://img-blog.csdnimg.cn/20190613221134232.jpg" alt="在这里插入图片描述" style="zoom:25%;" />

​	给定一个长度为 m 的单词在字典树中进行查找，我们将其逐字符拆分，每匹配一个字符，在树中就向下移动一个节点，因此在最坏情况下**查找的时间复杂度为 O(m)**。 事实上，对于一些不带分支的路径，我们没有逐字符匹配的必要，因此我们可以将这条路径上的所有节点合并成一个，把这棵树构造得更紧凑一些。

​	紧凑前缀树（Radix Tree)，它的原理和字典树很相似，最大的区别在于树的一条边能够**对应一个子串而不是一个字符**，这就避免了字符串很长导致树的节点很深的情况，不仅提高了查询效率，还减少了存储空间的使用。

<img src="https://img-blog.csdnimg.cn/20190613221242115.jpg" alt="在这里插入图片描述" style="zoom:50%;" />

​	针对 Radix Tree 的构造规则，它的节点插入和删除行为较 Trie Tree 来说有以下一些不同：

+ 插入一个新的字符串后，可能需要拆分某一条边上的公共前缀。
+ 删除一个现有字符串后，若父节点只剩下一个子节点，则父子节点可以合并，以减小树的深度。



总结：

​	Trie Tree 是**空间换时间**这一数据处理策略的典型代表，它以适当增加存储空间为代价，提升了字符串相关操作的执行效率。

​	优点：

+ 可以在 **O(m) 的时间复杂度**内完成字符串的插入、查找和删除操作，m 是长度，和字符串的个数无关。
+ 通过共享公共前缀，**减少了存储空间的使用**（前提是共享前缀节省的空间能 cover 额外开销（如指针））。这也是 GFS 使用前缀压缩技术的主要原因。

​	缺点：

+ 每个节点需要存储多个指针，对于**大规模的字符集，空间开销会比较大**，而且**空指针所占用的空间会被浪费**。

​	典型应用场景为 **K-V 存储**，与之相竞争的是 hash 表。

​	文件的命名空间为（文件路径，元数据）的**键值对**形式，而且对于文件路径名来说，文件目录就是天然的公共前缀，因此很适合用 Trie Tree 来压缩存储。

​	对比一些常规的文本压缩算法，如赫夫曼编码、 LZW 压缩等，我们分析发现它们并不适用于文件路径名的压缩。首先，文件的命名空间是随着用户的操作而动态变化的，而上述压缩算法适合压缩固定文本，数据每次更新都要重新计算编码；如果单独对每个文件路径应用压缩算法，效率又很低。其次，编解码需要时间，若用户操作频繁响应时间可能较长。最后，这些压缩方法并不是专门为键值存储设计的。相比之下，Trie Tree 对于插入、查找和删除都十分高效，适合在动态场景下使用；保存的就是字符串本身，无需编解码的开销；值可存放在叶节点内，适合键值存储。